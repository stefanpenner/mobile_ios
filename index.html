<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width, height=device-height"/>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="Facebook">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <link rel="apple-touch-startup-image" href="/startup.png">

    <link rel="apple-touch-icon" href="touch-icon-iphone.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="touch-icon-ipad.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="touch-icon-iphone-retina.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="touch-icon-ipad-retina.png" />

    <link rel="stylesheet" type="text/css" href="style.css">
    <script src='http://code.jquery.com/jquery-1.7.2.min.js'></script>
    <script src='http://cloud.github.com/downloads/wycats/handlebars.js/handlebars-1.0.rc.1.js'></script>
    <script src='js/ember.js'></script>
    <script src='js/app.js'></script>
    <script src='//connect.facebook.net/en_US/all.js'></script>
  </head>
  <body class='not-selectable'>
    <div id='fb-root'></div>
    <script>
      window.fbAsyncInit = function() {
        FB.init({
          appId      : '35316538800', // App ID
          status     : true, // check login status
          cookie     : true, // enable cookies to allow the server to access the session
          xfbml      : true  // parse XFBML
        });

        FB.getLoginStatus(function (response) {
          if (response.status === "connected") {
            // is logged in
          } else if (response.status === 'not_authorized'){
            alert('not authorized');
          } else {
            FB.login();
          }
        });

        FB.Event.subscribe('auth.statusChange', function(response){
          if(response.status === "connected") {
            App.Services.Facebook.didLogin(response);
          }else {
            App.Services.Facebook.didLogout(response);
          }
        });
      };

      (function(d){
         var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/en_US/all.js";
         ref.parentNode.insertBefore(js, ref);
       }(document));
    </script>

    <script type="text/x-handlebars" data-template-name="left">
      <div id="left-header">
        <input type="search" id="left-search" placeholder="Search"/>
      </div>
      <div id="left-body" class="scrollable">
        <div class="left-entry">
          {{#with App.currentUser}}
            <img class="left-user-photo" {{bindAttr src="thumb_url"}}/>
            {{name}}
          {{/with}}
        </div>
        {{#each group in App.groups }}
          <div class="left-placeholder">{{group.name}}</div>
          {{#each entry in group.content}}
            <div class="left-entry">{{entry}}</div>
          {{/each}}
        {{/each}}
      </div>
    </script>

    <script type="text/x-handlebars" data-template-name="feed_entry">
      <div class="entry">
        <div class="entry-body">
          <div class="entry-from">
            <img class="entry-from-avatar" {{bindAttr src="user.thumb_url"}}/>
            <div class="entry-from-name">{{user.name}}</div>
            <div class="entry-from-time">4 Minutes Ago</div>
          </div>
          {{message}}
          {{#if picture}}
             <img {{bindAttr src="picture"}}/>
          {{/if}}
        </div>
        <div class="entry-footer">
          {{#each actions}}
            <a {{bindAttr href="link"}}>{{name}}</a>
          {{/each}}
        </div>
      </div>
    </script>

    <script type="text/x-handlebars" data-template-name="center">
      <div id="header">
        <div id="top-nav" class="blue-gradient">
          <div class="inset-button blue-gradient place-left"></div>
          <div class="inset-button blue-gradient place-right"></div>
        </div>
        <div id="toolbar" class="hidden"></div>
      </div>
    </script>

    <script type="text/x-handlebars" data-template-name="right">
    </script>

    <script type="text/x-handlebars" data-template-name="application">
      {{outlet leftView}}
      {{outlet centerView}}
      {{outlet rightView}}
    </script>
  </body>
</html>
